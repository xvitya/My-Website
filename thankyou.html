<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Toy Galaxy â€“ Thank you</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script>window.dataLayer = window.dataLayer || [];</script>
  <!-- GTM + shared <style> here -->
</head>
<body>
  <!-- GTM noscript -->

  <div class="page">
    <header class="header">
      <div class="logo">ðŸ›¸ TOY GALAXY</div>
      <nav class="nav">
        <a href="index.html">Home</a>
        <a href="plp.html">Shop</a>
        <a href="cart.html">Cart (<span data-cart-count>0</span>)</a>
      </nav>
    </header>

    <main>
      <div class="card" id="thanks-main">
        <span class="pill">Thank you Â· purchase event</span>
        <h1>Order complete ðŸŽ‰</h1>
        <p>
          Your test order <code id="order-id"></code> has been created.
        </p>
        <p>Total paid: <strong id="order-total"></strong></p>

        <div class="btn-row" style="margin-top:1.5rem;">
          <a href="plp.html" class="btn" style="text-decoration:none;">
            ðŸ›’ Keep testing
          </a>
          <a href="index.html" class="btn secondary" style="text-decoration:none;">
            â¬… Back to homepage
          </a>
        </div>

        <small>
          Tip: This page fires a <code>purchase</code> event with full item list.
        </small>
      </div>
    </main>
  </div>

  <script src="shop.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      updateCartCountDisplay();

      const order = getLastOrder();
      if (!order) {
        document.getElementById("thanks-main").innerHTML = `
          <h1>No recent order found</h1>
          <p>
            This is still a great page to debug purchase events.
            Go through the flow again from the <a href="plp.html" class="inline-link">shop</a>.
          </p>
        `;
        return;
      }

      document.getElementById("order-id").textContent = order.orderId;
      document.getElementById("order-total").textContent = formatPrice(order.value);

      // purchase event
      pushEcomEvent("purchase", {
        transaction_id: order.orderId,
        currency: order.currency || "EUR",
        value: order.value,
        items: order.items
      });

      // Clear cart after purchase
      clearCart();
    });
  </script>
</body>
</html>

